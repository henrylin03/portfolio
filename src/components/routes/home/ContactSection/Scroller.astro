---
interface Props {
  text: string;
}

const { text } = Astro.props;
---

<div class="scroller" data-animated="true">
  <div class="scroller__inner">
    <p class="decorative-font">{text}</p>
  </div>
</div>

<style>
  .scroller[data-animated="true"] {
    overflow: hidden;
    mask: linear-gradient(
      90deg,
      transparent,
      white 20%,
      white 80%,
      transparent
    );
  }

  .scroller__inner {
    padding-bottom: 4rem;
    width: max-content;
    display: flex;
    gap: 1rem;
    flex-wrap: nowrap;

    animation: scroll 60s forwards linear infinite;
  }

  .scroller p {
    font-size: var(--text-8xl);
    font-weight: var(--font-weight-light);
    text-wrap: nowrap;
  }

  @keyframes scroll {
    to {
      transform: translate(calc(-50% - 0.5rem));
    }
  }
</style>

<script>
  const scrollerInnerElement = document.querySelector(".scroller__inner");
  const textElement = scrollerInnerElement?.querySelector("p");

  const TOTAL_COUNT_OF_TEXT = 5;
  let count = 0;
  while (count <= TOTAL_COUNT_OF_TEXT) {
    const duplicatedTextElement = textElement?.cloneNode(true);
    if (duplicatedTextElement)
      scrollerInnerElement?.appendChild(duplicatedTextElement);
    count++;
  }
</script>
